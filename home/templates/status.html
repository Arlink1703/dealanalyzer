{% extends 'base.html'%}

{% block body %}



<div class="px-4 py-5 my-5 text-center">
  <h1 class="display-5 fw-bold text-body-emphasis">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</h1>
  <div class="col-lg-6 mx-auto">
    <p class="lead mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏–µ–π –æ —Å–¥–µ–ª–∫–∞—Ö –¥–ª—è –µ–µ –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.</p>
    <form action="{% url 'upload_deals' %}" enctype="multipart/form-data" method="post">
      {% csrf_token %}
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <label for="file-upload" class="btn btn-primary btn-lg px-4 gap-3">
          <span id="file-name">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</span>
          <input id="file-upload" type="file" style="display:none;" name="deal_file" onchange="updateFileName(event)">
        </label>
        <button type="submit" class="btn btn-outline-secondary btn-lg px-4">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<script>
  function updateFileName(event) {
    var input = event.target;
    var fileName = input.files[0].name;
    document.getElementById("file-name").textContent = fileName;
  }
</script>


{% if form_errors is not None %}
<p>Found errors on line {{ row_count }}:</p>
<ul>
  {% for field, errors in form_errors.items %}
  {% for error in errors %}
  <li> {{field}}: {{ error }} </li>
  {% endfor %}
  {% endfor %}
</ul>
{% elif row_count %}
<p>Successfully uploaded {{ row_count }} row(s)! ü•≥</p>

{% endif %}



{% endblock %}